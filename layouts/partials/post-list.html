{{- $pages := .Paginator.Pages -}}

{{- if not $pages }}
  {{- $pages = .Pages -}}
{{- end -}}

{{- if eq (len $pages) 0 -}}
  <p>{{ i18n "noPosts" | default "No posts yet." }}</p>
{{- else -}}
  <section class="post-list">
    {{- range $pages }}
    <article class="post-card">
      <h2 class="title"><a href="{{ .RelPermalink }}">{{ .Title }}</a></h2>
      <div class="meta">
        <span class="meta-item">
          <svg class="meta-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
            <rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect>
            <line x1="16" y1="2" x2="16" y2="6"></line>
            <line x1="8" y1="2" x2="8" y2="6"></line>
            <line x1="3" y1="10" x2="21" y2="10"></line>
          </svg>
          <span>{{ i18n "publishedOn" }} {{ dateFormat ":date_medium" .Date }}</span>
        </span>
        <span class="meta-item">
          <svg class="meta-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
            <circle cx="12" cy="12" r="10"></circle>
            <polyline points="12 6 12 12 16 14"></polyline>
          </svg>
          <span>{{ i18n "readingTime" (dict "Count" .ReadingTime) }}</span>
        </span>
        {{ if .Draft }}<span class="draft-label">DRAFT</span>{{ end }}
      </div>
      <div class="summary">{{ .Summary }}</div>
      <a class="read-more" href="{{ .RelPermalink }}">
        <span>{{ i18n "readMore" }}</span>
        <svg class="meta-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
          <line x1="5" y1="12" x2="19" y2="12"></line>
          <polyline points="12 5 19 12 12 19"></polyline>
        </svg>
      </a>

      {{- $tags := .GetTerms "tags" -}}
      {{- if gt (len $tags) 0 }}
      <ul class="tag-list">
        {{- range $tags }}
        <li><a href="{{ .Page.RelPermalink }}">{{ .LinkTitle }}</a></li>
        {{- end }}
      </ul>
      {{- end -}}
    </article>
    {{- end -}}
  </section>

  {{- if .Paginator }}
    {{- if gt .Paginator.TotalPages 1 }}
    <nav class="pagination" aria-label="pagination">
      {{- if .Paginator.HasPrev }}
      <a href="{{ .Paginator.Prev.URL }}">{{ i18n "previous" }}</a>
      {{- else }}
      <span></span>
      {{- end -}}
      {{- if .Paginator.HasNext }}
      <a href="{{ .Paginator.Next.URL }}">{{ i18n "next" }}</a>
      {{- end -}}
    </nav>
    {{- end -}}
  {{- end -}}
{{- end -}}
